@{
    ViewBag.Title = "Index";
}
<script src="~/scripts/angular.min.js"></script>
<script src="http://apps.bdimg.com/libs/angular-route/1.3.13/angular-route.js"></script>
@*<script src="http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js"></script>*@
<h2>Index</h2>
<link href="~/Content/bootstrap.css" rel="stylesheet" />
<style>
    hr {
        height: 2px;
        border: none;
        border-top: 2px solid #000;
    }

    input.ng-invalid {
        border: solid red 2px;
        background-color: yellow;
    }

    table, th, td {
        border: 1px solid grey;
        border-collapse: collapse;
        padding: 5px;
    }

        table tr:nth-child(odd) {
            background-color: #f1f1f1;
        }

        table tr:nth-child(even) {
            background-color: #ffffff;
        }
</style>
<form ng-app="myApp" name="myForm">

    <div ng-controller="namesCtrl">
        <p><input type="text" ng-model="test" /></p>
        <ul>
            <li ng-repeat="x in names | filter:test | orderBy:'country'">
                {{ ( x.name | uppercase ) + ',' + x.country }}{{  }}
            </li>
        </ul>
    </div>
    <hr />

    <div ng-controller="myCtrl1">
        <p> This page's url: </p>
        <h3>{{ myUrl }}</h3>
    </div>
    <hr />

    <div ng-controller="myCtrl2">
        <p> Now time is: </p>
        <h3>{{ theTime }}</h3>
    </div>
    <hr />

    <div ng-controller="myCtrl3">
        FirstName: <input type="text" ng-model="user.firstName" /><br />
        LastName: <input type="text" ng-model="user.lastName" /><br />
        <button ng-click="reset()">RESET</button>
        @*Name: {{ fullName() }}*@

        <p>form = {{ user }}</p>
        <p>master = {{ master }}</p>
    </div>
    <hr />

    <div ng-init="points=[1,15,19,2,40]">
        <p>The third number is: {{ points[2] }}</p>
    </div>
    <hr />

    <div ng-init="quantity=1;price=5">
        Number: <input type="number" ng-model="quantity" />
        Price: <input type="number" ng-model="price" />
        <br />
        Total Price: {{ ( quantity * price ) | currency }}
    </div>
    <hr />

    <div class="runoob-directive"></div>
    <hr />

    <div ng-init="myText='test@runoob.com'">
        Emial: <input type="email" name="myAddress" ng-model="myText" required />
        <span ng-show="myForm.myAddress.$error.email">Not a legal Email address!</span>

        <p>编辑邮箱地址，查看状态的改变。</p>
        <h1>状态</h1>
        <p>Valid: {{myForm.myAddress.$valid}} (如果输入的值是合法的则为 true)。</p>
        <p>Dirty: {{myForm.myAddress.$dirty}} (如果值改变则为 true)。</p>
        <p>Touched: {{myForm.myAddress.$touched}} (如果通过触屏点击则为 true)。</p>
    </div>
    <hr />

    <div ng-controller="siteCtrl">
        <ul>
            <li ng-repeat="x in names1">
                {{ x.Name + ', ' + x.Country }}
            </li>
        </ul>
    </div>
    <hr />

    <div ng-controller="selectCtrl">
        <p>Choose a website: </p>

        <select ng-model="selectedSite">
            <option ng-repeat="x in sites" value="{{ x.url }}">{{ x.site }}</option>
        </select>

        <p>Your website is: {{ selectedSite }}</p>
        <br />

        <p>Choose a car: </p>
        <select ng-model="selectedCar" ng-options="y.brand for (x,y) in cars"></select>
        <p>Your car is: {{ selectedCar.brand }}</p>
        <p>Your car's model is: {{ selectedCar.model }}</p>
        <p>Your car's color is: {{ selectedCar.color }}</p>
    </div>
    <hr />

    <div ng-controller="customersCtrl">
        <table>
            <tr ng-repeat="x in names">
                <td>{{ $index + 1 }}</td>
                <td>{{ x.Name }}</td>
                <td>{{ x.Country }}</td>
            </tr>
        </table>
    </div>
    <hr />

    <div ng-init="mySwitch=true">
        <p><button ng-disabled="mySwitch">Click me!</button></p>
        <p><input type="checkbox" ng-model="mySwitch" />Button</p>
        <p>{{ mySwitch }}</p>
    </div>
    <hr />

    <div ng-controller="countCtrl">
        <button ng-click="toggle()">Visible/Hide</button>
        <br />
        <br />
        <div ng-hide="myVar">
            <button ng-click="count = count + 1">Click me!</button>
            <p>{{ count }}</p>
        </div>
    </div>
    <hr />

    <div ng-controller="validateCtrl">
        <p>
            User name: <br />
            <input type="text" name="user" ng-model="user" required />
            <span style="color:red" ng-show="myForm.user.$dirty && myForm.user.$invalid">
                <span ng-show="myForm.user.$error.required">User name is required.</span>
            </span>
        </p>
        <p>
            Email: <br />
            <input type="email" name="email" ng-model="email" required />
            <span style="color:red" ng-show="myForm.email.$dirty && myForm.email.$invalid">
                <span ng-show="myForm.email.$error.required">Email is required.</span>
                <span ng-show="myForm.email.$error.email">Illegal email.</span>
            </span>
        </p>
        <input type="submit" ng-disabled="myForm.user.$dirty && myForm.user.$invalid || myForm.email.$dirty && myFrom.email.$invalid" class="btn btn-success" />
    </div>
    <hr />

    <div ng-controller="CalcController">
        <p>Input a number: <input type="number" ng-model="number" /></p>
        <button ng-click="square()">X<sup>2</sup></button>
        <p>Result: {{ result }}</p>
    </div>
    <hr />

    <div>
        <h2>AngularJS route instance</h2>
        <ul>
            <li><a href="#/">Home Page</a></li>
            <li><a href="#/computers">Computers</a></li>
            <li><a href="#/printers">Printers</a></li>
            <li><a href="#/others">Others</a></li>
        </ul>
        <div ng-view></div>
    </div>
    <hr />

    <div ng-controller="myNoteCtrl">
        <h2>My Note</h2>
        <p><textarea ng-model="message" cols="40" rows="10" class="form-control"></textarea></p>
        <p>

            <button ng-click="save()" class="btn btn-success">
                <span class="glyphicon glyphicon-ok"></span>Save
            </button>
            <button ng-click="clear()" class="btn btn-danger">
                <span class="glyphicon glyphicon-remove"></span>Clear
            </button>
        </p>
        <p>Number of characters left:<span ng-bind="left()"></span></p>
    </div>
    <hr />


</form>



<script>
    var app = angular.module('myApp', ['ngRoute']);
    app.controller('namesCtrl', function ($scope) {
        $scope.names = [
            { name: 'Jani', country: 'Norway' },
            { name: 'Hege', country: 'Sweden' },
            { name: 'Kai', country: 'Denmark' }
        ];
    });

    app.controller('myCtrl1', function ($scope, $location) {
        $scope.myUrl = $location.absUrl();
    });

    app.controller('myCtrl2', function ($scope, $interval) {
        $scope.theTime = new Date().toLocaleTimeString();
        $interval(function () {
            $scope.theTime = new Date().toLocaleTimeString();
        }, 1000);
    });

    app.controller('myCtrl3', function ($scope) {
        //$scope.firstName = "John";
        //$scope.lastName = "Doe";
        //$scope.fullName = function () {
        //    return $scope.firstName + " " + $scope.lastName;
        //}
        $scope.master = { firstName: "John", lastName: "Doe" };
        $scope.reset = function () {
            $scope.user = angular.copy($scope.master);
        };
        $scope.reset();
    });

    app.directive("runoobDirective", function () {
        return {
            restrict: "C",
            template: "User-defined Instruction"
        };
    });

    //app.service('hexafy', function () {
    //    this.myFunc = function (x) {
    //        return "test";
    //    }
    //});
    //app.filter('myFormat', ['hexafy', function (hexafy) {
    //    return function (x) {
    //        return hexafy.myFunc(x);
    //    };
    //}]);

    app.controller('siteCtrl', function ($scope, $http) {
        $http.get("/Data/sites.txt")
        .success(function (response) { $scope.names1 = response.sites; });
    });

    app.controller('selectCtrl', function ($scope) {
        $scope.sites = [
            { site: "Google", url: "http://www.google.com" },
            { site: "Baidu", url: "http://www.baidu.com" },
            { site: "Taobao", url: "http://www.taobao.com" }
        ];

        $scope.cars = {
            car01: { brand: "Ford", model: "Mustang", color: "red" },
            car02: { brand: "Fiat", model: "500", color: "white" },
            car03: { brand: "Volvo", model: "XC90", color: "black" }
        }
    });

    app.controller('customersCtrl', function ($scope, $http) {
        $http.get("/Data/customers.txt")
        .success(function (response) { $scope.names = response.records; });
    });

    app.controller('countCtrl', function ($scope) {
        $scope.count = 10;
        $scope.myVar = false;
        $scope.toggle = function () {
            $scope.myVar = !$scope.myVar;
        }
    });

    app.controller('validateCtrl', function ($scope) {
        $scope.user = 'John Doe';
        $scope.email = 'john.doe@@gmail.com';
    });

    app.config(function ($provide) {
        $provide.provider('MathService', function () {
            this.$get = function () {
                var factory = {};

                factory.multiply = function (a, b) {
                    return a * b;
                }
                return factory;
            };
        });
    });

    app.value("defaultInput", 5);

    app.service('CalcService', function (MathService) {
        this.square = function (a) {
            return MathService.multiply(a, a);
        }
    });

    app.controller('CalcController', function ($scope, CalcService, defaultInput) {
        $scope.number = defaultInput;
        $scope.result = CalcService.square($scope.number);

        $scope.square = function () {
            $scope.result = CalcService.square($scope.number);
        }
    });

    app.config(['$routeProvider', function ($routeProvider) {
        $routeProvider
        .when('/', { template: 'This is home page.' })
        .when('/computers', { template: 'This is computers page.' })
        .when('/printers', { template: 'This is printers page.' })
        .otherwise({ redirectTo: '/' });
    }])

    app.controller('myNoteCtrl', function ($scope) {
        $scope.message = "test";
        $scope.left = function () { return 100 - $scope.message.length; };
        $scope.clear = function () { $scope.message = "" };
        $scope.save = function () { alert("Note Saved.") };
    });

</script>
